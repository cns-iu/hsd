<div class="vega-input">
  <h2>Legend</h2>
  <mat-icon class="infoIcon" (click)="openSumTreeInfoDialog()">info</mat-icon>
  <div class="shapeLegend">
    <div class="row">
      <div class="circle1">1</div>
      <div class="legendShapeText">Single Concept</div>
    </div>
    <div class="row">
      <div class="square"></div>
      <div class="legendShapeText">Multiple Concepts</div>
    </div>
  </div>
  <br>
  <mat-form-field>
    <mat-select placeholder="Summary Type" [(value)]="summaryType" (valueChange)="onEncodingChange()">
      <mat-option *ngFor="let type of summaryTypes" [value]="type.value">
        {{ type.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-form-field>
    <mat-select placeholder="Color" [(value)]="colorField" (valueChange)="onEncodingChange()" #colorSelector>
      <mat-option *ngFor="let type of colorFields" [value]="type.value">
        {{ type.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-chip-list class="mat-chip-list-stacked">
    <mat-chip *ngFor="let chip of colorMappings[colorSelector.selected?.value]" selected="true" [style.background]="chip.color">
      {{chip.label}}
    </mat-chip>
  </mat-chip-list>
  <br>
  <mat-form-field>
    <mat-select placeholder="Opacity" [(value)]="opacityField" (valueChange)="onEncodingChange()" #opacitySelector>
      <mat-option *ngFor="let type of opacityFields" [value]="type.value">
        {{ type.viewValue }}
      </mat-option>
    </mat-select>
  </mat-form-field>
  <mat-chip-list class="mat-chip-list-stacked">
    <mat-chip *ngFor="let chip of opacityMappings[opacitySelector.selected?.value]" selected="true" [style.background]="chip.color">
      {{chip.label}}
    </mat-chip>
  </mat-chip-list>
</div>

<div #vegaVis>Vega Visualization Entry Point</div>